{% extends "base.html" %} {% load static %} {% block title_page %}
{{title_page.capitalize }} {% endblock %} {% block breadcrumb %}

<li class="breadcrumb-item">
  <a href="">{{ title_page.capitalize }}</a>
</li>
{% endblock %} {% block content %}

<div class="col-lg-12 col-md-12">
  <div class="row">
    <div class="col-xl-3">
      <div class="card">
        <div class="list-group list-group-transparent mb-0 mail-inbox pb-3">
          <div class="mt-4 mb-4 mx-4 text-center">
            <a
              href="{% url 'core:email-compose' %}"
              class="btn btn-primary btn-lg d-grid"
              >Compose</a
            >
          </div>
          <a
            href="{% url 'core:email-inbox' %}"
            class="list-group-item d-flex align-items-center mx-4 active"
          >
            <span class="icons"><i class="ri-mail-line"></i></span> Inbox
          </a>
          <a
            href="{% url 'core:email-sent' %}"
            class="list-group-item d-flex align-items-center mx-4"
          >
            <span class="icons"><i class="ri-mail-send-line"></i></span> Sent
            Mail
          </a>
          <a
            href="{% url 'core:email-trash' %}"
            class="list-group-item d-flex align-items-center mx-4"
          >
            <span class="icons"><i class="ri-delete-bin-line"></i></span> Trash
          </a>
        </div>
      </div>
    </div>
    <div class="col-xl-9">
      <div class="card">
        <div class="card-body p-6">
          <div class="inbox-body">
            <div class="table-responsive">
              <table class="table table-inbox table-hover text-nowrap mb-0">
                <tbody>
                  {% for email in email_list %}

                  <div class="modal fade" id="modaldemo8">
                    <div class="modal-dialog modal-lg" role="document">
                      <div class="modal-content">
                        <div class="modal-body">
                          <h4>Offer</h4>
                          <dl class="row">
                            <dt class="col-sm-4">Departure Date</dt>
                            <dd class="col-sm-8">
                              {{email.offer.departure_date}}
                            </dd>
                            <dt class="col-sm-4">Return Date</dt>
                            <dd class="col-sm-8">
                              {{email.offer.return_date}}
                            </dd>
                            <dt class="col-sm-4">Duration</dt>
                            <dd class="col-sm-8">{{email.offer.duration}}</dd>
                            <dt class="col-sm-4">Guests</dt>
                            <dd class="col-sm-8">{{email.offer.guests}}</dd>
                            <dt class="col-sm-4">Price</dt>
                            <dd class="col-sm-8">{{email.offer.price}}</dd>
                            <dt class="col-sm-4">Message</dt>
                            <dd class="col-sm-8">{{email.offer.message}}</dd>
                            <dt class="col-sm-4">Status</dt>
                            <dd class="col-sm-8">
                              {{email.offer.get_status_display}}
                            </dd>
                          </dl>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% if email.read %}
                  <tr>
                    {% else %}
                  </tr>

                  <tr class="unread">
                    {% endif %}
                    <td
                      class="view-message clickable-row"
                      data-href="email-read.html"
                    >
                      {% comment %} {% if email.offer %}
                      <i class="fa fa-star text-success"></i>
                      {% endif %}{% endcomment %} {% if email.read %}
                      <i class="fa fa-envelope-open" style="color: black"></i>
                      {% else %}
                      <i class="fa fa-envelope" style="color: black"></i>
                      {% endif %}
                    </td>
                    <td
                      class="view-message clickable-row"
                      data-href="{% url 'core:email-read'  email.id %}"
                    >
                      {{email.from_user}}
                    </td>
                    <td
                      class="view-message clickable-row"
                      data-href="{% url 'core:email-read'  email.id %}"
                    >
                      {{email.subject}}
                    </td>
                    <td
                      class="view-message clickable-row"
                      data-href="{% url 'core:email-read'  email.id %}"
                    >
                      {{email.content}}
                    </td>
                    <td
                      class="view-message text-end clickable-row"
                      data-href="{% url 'core:email-read'  email.id %}"
                    >
                      {{email.date}}
                    </td>
                    <td class="view-message text-end">
                      {% if email.offer.active %}
                      <a
                        title="Get Offer"
                        data-bs-effect="effect-flip-horizontal"
                        data-bs-toggle="modal"
                        href="#modaldemo8"
                        ><i class="fa fa-star text-success"></i
                      ></a>
                      {% endif %}
                      <a
                        title="Reply"
                        href="{% url 'core:reply-message' email.id %}"
                        ><i class="fa fa-reply" style="color: blue"></i
                      ></a>
                      <a
                        title="Delete"
                        href="{% url 'core:delete-message' email.id %}"
                        ><i class="fa fa-trash" style="color: red"></i
                      ></a>
                    </td>
                  </tr>
                  {% empty %} No emails found. {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endblock %}
</div>
